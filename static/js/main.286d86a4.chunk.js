(this["webpackJsonpslack-app"]=this["webpackJsonpslack-app"]||[]).push([[0],{54:function(e,t,s){},82:function(e,t,s){"use strict";s.r(t);var a=s(0),n=s.n(a),c=s(28),i=s.n(c),r=(s(54),s(18)),l=s(5),o=s(3),d=s(17),u=s.n(d),j=function(e){return""!==e&&null!==e?e.match(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/)?{is_valid:!0}:{is_valid:!1,message:"Please enter a valid email address."}:""===e?{is_valid:!1,message:"Email address is required."}:void 0},b=function(e){return""!==e&&null!==e?e.length<8?{is_valid:!1,message:"Password must be at least 8 characters long."}:{is_valid:!0}:""===e?{is_valid:!1,message:"Password is required."}:void 0},m=function(e,t){var s={method:"GET",url:"https://slackapi.avionschool.com/api/v1/channels",headers:{"access-token":e["access-token"],client:e.client,expiry:e.expiry,uid:e.uid}};u()(s).then((function(e){e.data&&t(e.data.data)})).catch((function(e){console.log(e)}))},x=function(e,t,s){var a={method:"GET",url:"https://slackapi.avionschool.com/api/v1/channels/".concat(t),headers:{"access-token":e["access-token"],client:e.client,expiry:e.expiry,uid:e.uid}};u()(a).then((function(e){e.data&&s(e.data.data)})).catch((function(e){console.log(e)}))},h=function(e,t,s){var a=s,n={method:"GET",url:"https://slackapi.avionschool.com/api/v1/messages?receiver_id=".concat(t,"&receiver_class=").concat(a),headers:{"access-token":e["access-token"],client:e.client,expiry:e.expiry,uid:e.uid}},c=[];return u()(n).then((function(e){if(e.data)return e.data.data})).catch((function(e){return console.log(e),c}))};function f(e){var t=Object(a.useState)(e),s=Object(o.a)(t,2),n=s[0],c=s[1],i=Object(a.useRef)(null),r=function(e){i.current&&!i.current.contains(e.target)&&c(!1)};return Object(a.useEffect)((function(){return document.addEventListener("click",r,!0),function(){document.removeEventListener("click",r,!0)}})),{ref:i,isComponentVisible:n,setIsComponentVisible:c}}var v=function(e,t){if("User"===t){var s=String(e%100).padStart(2,"0");return"icons/punk-01".concat(s,".png")}return"icons/punk".concat(e%25,"@20x.png")},p=function(e){switch(e%4){case 1:return"bg-red-300 rounded";case 2:return"bg-indigo-200 rounded";case 3:return"bg-green-200 rounded";default:return"bg-yellow-200 rounded"}},O=s(1),g=function(e){var t=e.children;return Object(O.jsx)("form",{onSubmit:function(e){e.preventDefault()},children:t})},y=function(e){var t=e.width,s=e.height;return Object(O.jsxs)("svg",{width:t,height:s,viewBox:"0 0 1013 257",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:[Object(O.jsx)("title",{children:"Slack Logo"}),Object(O.jsx)("desc",{children:"Created with Sketch."}),Object(O.jsx)("defs",{children:Object(O.jsx)("polygon",{id:"path-1",points:"0 256.5 1012.981 256.5 1012.981 0 0 0"})}),Object(O.jsxs)("g",{id:"Slack-Logo",stroke:"none",fill:"none",children:[Object(O.jsx)("path",{d:"M324.0001,201.9355 L336.5771,172.5945 C350.3481,182.7725 368.3141,188.1615 386.2781,188.1615 C399.4521,188.1615 407.8361,183.0725 407.8361,175.2875 C407.5371,153.7315 328.4921,170.4985 327.8931,116.3035 C327.5921,88.7585 352.1451,67.4995 386.8771,67.4995 C407.5371,67.4995 428.1961,72.5925 442.8671,84.2695 L431.1151,114.2375 C417.6161,105.5745 400.9481,99.5365 385.0811,99.5365 C374.3001,99.5365 367.1151,104.6255 367.1151,111.2145 C367.4151,132.4735 447.0591,120.7955 447.9591,172.5945 C447.9591,200.7395 424.0031,220.4975 389.8701,220.4975 C364.7221,220.4975 341.6671,214.5125 324.0001,201.9355",id:"Fill-1",fill:"#000000"}),Object(O.jsx)("path",{d:"M809.6163,161.9697 C803.3433,173.0477 791.4593,180.5267 777.8173,180.5267 C757.6433,180.5267 741.2923,164.1747 741.2923,144.0007 C741.2923,123.8267 757.6433,107.4717 777.8173,107.4717 C791.4593,107.4717 803.3433,114.9507 809.6163,126.0287 L844.5813,106.6587 C831.4873,83.2977 806.5033,67.5017 777.8173,67.5017 C735.5693,67.5017 701.3183,101.7487 701.3183,144.0007 C701.3183,186.2497 735.5693,220.4997 777.8173,220.4997 C806.5033,220.4997 831.4873,204.7007 844.5813,181.3397 L809.6163,161.9697 Z",id:"Fill-3",fill:"#000000"}),Object(O.jsx)("g",{id:"Clip-6"}),Object(O.jsx)("polygon",{id:"Fill-5",fill:"#000000",mask:"url(#mask-2)",points:"465.585 217.505 509.301 217.505 509.301 3.823 465.585 3.823"}),Object(O.jsx)("polygon",{id:"Fill-7",fill:"#000000",mask:"url(#mask-2)",points:"861.5909 3.8232 861.5909 217.5052 905.3069 217.5052 905.3069 153.4852 957.1079 217.5052 1012.9809 217.5052 947.1059 141.4512 1008.1889 70.4872 954.7109 70.4872 905.3069 129.4832 905.3069 3.8232"}),Object(O.jsx)("path",{d:"M638.9073,70.4946 L638.9073,87.8606 C631.7223,75.8836 614.0553,67.5016 595.4933,67.5016 C557.1683,67.5016 526.9283,101.3346 526.9283,143.8496 C526.9283,186.3676 557.1683,220.4996 595.4933,220.4996 C614.0553,220.4996 631.7223,212.1156 638.9073,200.1376 L638.9073,217.5036 L682.6223,217.5036 L682.6223,70.4946 L638.9073,70.4946 Z M638.9073,162.2636 C632.6193,172.7446 619.4453,180.5266 604.7743,180.5266 C584.6003,180.5266 568.2463,164.1746 568.2463,144.0006 C568.2463,123.8276 584.6003,107.4726 604.7743,107.4726 C619.4453,107.4726 632.6193,115.5566 638.9073,126.3346 L638.9073,162.2636 Z",id:"Fill-8",fill:"#000000",mask:"url(#mask-2)"}),Object(O.jsx)("path",{d:"M54.0001,162 C54.0001,176.912 41.9121,189 27.0001,189 C12.0881,189 0.0001,176.912 0.0001,162 C0.0001,147.088 12.0881,135 27.0001,135 L54.0001,135 L54.0001,162 Z",id:"Fill-9",fill:"#E01E5A",mask:"url(#mask-2)"}),Object(O.jsx)("path",{d:"M67.5001,162 C67.5001,147.088 79.5881,135 94.5001,135 C109.4121,135 121.5001,147.088 121.5001,162 L121.5001,229.5 C121.5001,244.412 109.4121,256.5 94.5001,256.5 C79.5881,256.5 67.5001,244.412 67.5001,229.5 L67.5001,162 Z",id:"Fill-10",fill:"#E01E5A",mask:"url(#mask-2)"}),Object(O.jsx)("path",{d:"M94.5001,54 C79.5881,54 67.5001,41.912 67.5001,27 C67.5001,12.088 79.5881,0 94.5001,0 C109.4121,0 121.5001,12.088 121.5001,27 L121.5001,54 L94.5001,54 Z",id:"Fill-11",fill:"#36C5F0",mask:"url(#mask-2)"}),Object(O.jsx)("path",{d:"M94.5001,67.5 C109.4121,67.5 121.5001,79.588 121.5001,94.5 C121.5001,109.412 109.4121,121.5 94.5001,121.5 L27.0001,121.5 C12.0881,121.5 0.0001,109.412 0.0001,94.5 C0.0001,79.588 12.0881,67.5 27.0001,67.5 L94.5001,67.5 Z",id:"Fill-12",fill:"#36C5F0",mask:"url(#mask-2)"}),Object(O.jsx)("path",{d:"M202.5001,94.5 C202.5001,79.588 214.5881,67.5 229.5001,67.5 C244.4121,67.5 256.5001,79.588 256.5001,94.5 C256.5001,109.412 244.4121,121.5 229.5001,121.5 L202.5001,121.5 L202.5001,94.5 Z",id:"Fill-13",fill:"#2EB67D",mask:"url(#mask-2)"}),Object(O.jsx)("path",{d:"M189.0001,94.5 C189.0001,109.412 176.9121,121.5 162.0001,121.5 C147.0881,121.5 135.0001,109.412 135.0001,94.5 L135.0001,27 C135.0001,12.088 147.0881,0 162.0001,0 C176.9121,0 189.0001,12.088 189.0001,27 L189.0001,94.5 Z",id:"Fill-14",fill:"#2EB67D",mask:"url(#mask-2)"}),Object(O.jsx)("path",{d:"M162.0001,202.5 C176.9121,202.5 189.0001,214.588 189.0001,229.5 C189.0001,244.412 176.9121,256.5 162.0001,256.5 C147.0881,256.5 135.0001,244.412 135.0001,229.5 L135.0001,202.5 L162.0001,202.5 Z",id:"Fill-15",fill:"#ECB22E",mask:"url(#mask-2)"}),Object(O.jsx)("path",{d:"M162.0001,189 C147.0881,189 135.0001,176.912 135.0001,162 C135.0001,147.088 147.0881,135 162.0001,135 L229.5001,135 C244.4121,135 256.5001,147.088 256.5001,162 C256.5001,176.912 244.4121,189 229.5001,189 L162.0001,189 Z",id:"Fill-16",fill:"#ECB22E",mask:"url(#mask-2)"})]})]})},N=function(e){var t=e.label,s=e.id,a=e.type,n=e.placeholder,c=e.onChange,i=e.value;return Object(O.jsxs)("div",{className:"flex flex-col",children:[Object(O.jsx)("label",{htmlFor:s,children:t}),Object(O.jsx)("input",{onChange:c,value:i,className:"border border-gray p-3 rounded p-2 ",id:s,name:s,type:a,placeholder:n})]})},w=function(e){var t=e.children,s=(e.color,e.onClick);return Object(O.jsx)("button",{onClick:s,className:"px-2 py-3 rounded bg-green-400 text-white",children:t})},C=s(85),k=s(10),S=function(e){var t=e.type,s=e.onClick,a=e.children,n="border-l-4 flex items-center py-2 px-3 shadow-md mb-2 justify-between",c="rounded-full bg-white mr-3 p-1",i="bg-green-500 border-green-700",r="text-green-500",l="bg-red-400 border-red-600",o="text-red-400";return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)("div",{className:"max-w-xl w-full centered-fixed z-10 bottom-10",children:Object(O.jsxs)("div",{className:"success"===t?"".concat(n," ").concat(i):"".concat(n," ").concat(l),children:[Object(O.jsx)("div",{className:"success"===t?"".concat(c," ").concat(r):"".concat(c," ").concat(o),children:"success"===t?Object(O.jsx)(k.a,{className:"h-5 w-5"}):Object(O.jsx)(k.d,{className:"h-5 w-5"})}),Object(O.jsx)("div",{className:"text-white flex-grow mr-auto",children:a}),Object(O.jsx)("div",{children:Object(O.jsx)(k.h,{className:"h-5 w-5 text-white cursor-pointer hover:close-rotate",onClick:s})})]})})})},L=Object(a.createContext)(),T=function(e){var t=e.children,s=Object(a.useState)(!1),n=Object(o.a)(s,2),c=n[0],i=n[1],r=function(e){i(e)},l=Object(a.useState)(null),d=Object(o.a)(l,2),u=d[0],j=d[1],b=function(e){j(e)};return Object(a.useEffect)((function(){r(JSON.parse(sessionStorage.getItem("isAuthenticated"))),b(JSON.parse(sessionStorage.getItem("activeUser")))}),[]),Object(a.useEffect)((function(){sessionStorage.setItem("isAuthenticated",JSON.stringify(c)),sessionStorage.setItem("activeUser",JSON.stringify(u))}),[c,u]),Object(O.jsx)(L.Provider,{value:{isAuthenticated:c,setAuth:r,activeUser:u,setUser:b},children:t})},M=function(){var e=Object(a.useState)(null),t=Object(o.a)(e,2),s=t[0],n=t[1],c=Object(a.useState)(null),i=Object(o.a)(c,2),d=i[0],m=i[1],x=Object(a.useState)(void 0),h=Object(o.a)(x,2),f=h[0],v=h[1],p=Object(a.useState)(void 0),k=Object(o.a)(p,2),T=k[0],M=k[1],E=Object(a.useContext)(L),F=E.isAuthenticated,D=E.setAuth,_=E.activeUser,U=E.setUser,P=Object(a.useState)(!1),I=Object(o.a)(P,2),A=I[0],R=I[1],B=Object(a.useState)({toastType:"",toastMsg:""}),Z=Object(o.a)(B,2),V=Z[0],z=Z[1],J=[{state:f,setter:n},{state:T,setter:m}],G=Object(l.g)();Object(a.useEffect)((function(){var e=j(s),t="Please enter a valid email address.";(null===e||void 0===e?void 0:e.is_valid)||(null===e||void 0===e?void 0:e.message)===t?v(null):(null===e||void 0===e?void 0:e.message)!==t&&v(null===e||void 0===e?void 0:e.message)}),[s]),Object(a.useEffect)((function(){var e=b(d),t="Password must be at least 8 characters long.";(null===e||void 0===e?void 0:e.is_valid)||(null===e||void 0===e?void 0:e.message)===t?M(null):(null===e||void 0===e?void 0:e.message)!==t&&M(null===e||void 0===e?void 0:e.message)}),[d]);var q=function(e,t){"email"===t?n(e.target.value):"password"===t&&m(e.target.value)},K=function(e){e.forEach((function(e){void 0===e.state&&e.setter("")})),null===f&&null===T&&function(e,t,s,a,n,c){var i={method:"POST",url:"https://slackapi.avionschool.com/api/v1/auth/sign_in",headers:{},data:{email:e,password:t}};u()(i).then((function(e){s(!0),a({"access-token":e.headers["access-token"],client:e.headers.client,expiry:e.headers.expiry,uid:e.headers.uid})})).catch((function(e){if(e.response){var t=e.response.data.errors;n(!0),c("error",t)}}))}(s,d,D,U,$,H)},$=function(e){R(e)},H=function(e,t){z({toastType:e,toastMsg:t})};return Object(a.useEffect)((function(){var e=setTimeout((function(){R(!1)}),3e3);return function(){return clearTimeout(e)}}),[A]),Object(a.useEffect)((function(){_&&G.push("/")}),[_]),Object(a.useEffect)((function(){if(F&&_.uid)return Object(O.jsx)(l.a,{to:"/"})}),[]),Object(O.jsxs)("div",{className:"h-full p-10 flex flex-col items-center justify-center",children:[Object(O.jsx)("div",{className:"flex justify-center my-10",children:Object(O.jsx)(y,{width:145})}),Object(O.jsx)("h2",{className:"text-center text-2xl lg:text-5xl",children:"Avion School on Slack"}),Object(O.jsx)("p",{className:"text-center text-lg lg:text-xl my-5",children:"Sign in to your account"}),Object(O.jsx)("div",{className:"w-96 lg:w-2/5 my-5 px-5",children:Object(O.jsx)(g,{children:Object(O.jsxs)("div",{className:"flex flex-col gap-4 p-2",children:[Object(O.jsx)(N,{label:"Email",value:null===s?"":s,onChange:function(e){q(e,"email")},id:"email",type:"text",placeholder:"Enter your email"}),f&&Object(O.jsx)("span",{className:"text-red-400",children:f}),Object(O.jsx)(N,{label:"Password",value:null===d?"":d,onChange:function(e){q(e,"password")},id:"password",type:"password",placeholder:"Enter a password"}),T&&Object(O.jsx)("span",{className:"text-red-400",children:T}),Object(O.jsx)(w,{onClick:function(){return K(J)},children:"Sign In"}),Object(O.jsxs)("span",{children:["Don't have an account yet? ",Object(O.jsx)("br",{}),Object(O.jsx)(r.b,{to:"/signup",className:"text-blue-800 underline font-semibold",children:" Create an account"})]})]})})}),Object(O.jsx)(C.a,{show:A,enter:"transition-opacity duration-75",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition-opacity duration-150",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:Object(O.jsx)(S,{type:V.toastType,onClick:function(){$(!1)},children:V.toastMsg})})]})},E=function(){var e=Object(a.useState)(null),t=Object(o.a)(e,2),s=t[0],n=t[1],c=Object(a.useState)(null),i=Object(o.a)(c,2),d=i[0],m=i[1],x=Object(a.useState)(null),h=Object(o.a)(x,2),f=h[0],v=h[1],p=Object(a.useState)(void 0),k=Object(o.a)(p,2),T=k[0],M=k[1],E=Object(a.useState)(void 0),F=Object(o.a)(E,2),D=F[0],_=F[1],U=Object(a.useState)(void 0),P=Object(o.a)(U,2),I=P[0],A=P[1],R=Object(a.useContext)(L),B=R.isAuthenticated,Z=R.setAuth,V=R.activeUser,z=R.setUser,J=Object(a.useState)(!1),G=Object(o.a)(J,2),q=G[0],K=G[1],$=Object(a.useState)({toastType:"",toastMst:""}),H=Object(o.a)($,2),Q=H[0],W=H[1],X=[{state:T,setter:n},{state:D,setter:m},{state:I,setter:v}],Y=Object(l.g)();Object(a.useEffect)((function(){var e=j(s);(null===e||void 0===e?void 0:e.is_valid)?M(null):M(null===e||void 0===e?void 0:e.message)}),[s]),Object(a.useEffect)((function(){var e=b(d);(null===e||void 0===e?void 0:e.is_valid)?_(null):_(null===e||void 0===e?void 0:e.message)}),[d]),Object(a.useEffect)((function(){var e=function(e,t){return""!==t&&null!==t?e===t?{is_valid:!0}:{is_valid:!1,message:"The password confirmation does not match."}:""===t?{is_valid:!1,message:"Password confirmation is required."}:void 0}(d,f);(null===e||void 0===e?void 0:e.is_valid)?A(null):A(null===e||void 0===e?void 0:e.message)}),[f]);var ee=function(e){e.forEach((function(e){void 0===e.state&&e.setter("")})),null===T&&null===D&&null===I&&function(e,t,s,a,n,c,i){var r={method:"POST",url:"https://slackapi.avionschool.com/api/v1/auth",headers:{},data:{email:e,password:t,password_confirmation:s}};u()(r).then((function(e){"success"===e.data.status&&(a(!0),n({"access-token":e.headers["access-token"],client:e.headers.client,expiry:e.headers.expiry,uid:e.headers.uid}),c(!0),i("success","Success! Account has been created."))})).catch((function(e){if(e.response){var t=e.response.data.errors.full_messages.map((function(e){return e.concat(".")})).reduce((function(e,t){return"".concat(e," ").concat(t)}));c(!0),i("error",t)}}))}(s,d,f,Z,z,se,ae)},te=function(e,t){"email"===t?n(e.target.value):"password"===t?m(e.target.value):"confirmPassword"===t&&v(e.target.value)},se=function(e){K(e)},ae=function(e,t){W({toastType:e,toastMsg:t})};return Object(a.useEffect)((function(){var e=setTimeout((function(){K(!1),V&&Y.push("/")}),2e3);return function(){return clearTimeout(e)}}),[q]),Object(a.useEffect)((function(){if(B&&V.uid)return Object(O.jsx)(l.a,{to:"/"})}),[]),Object(O.jsxs)("div",{className:"h-full p-10 flex flex-col items-center justify-center",children:[Object(O.jsx)("div",{className:"flex justify-center my-10",children:Object(O.jsx)(y,{width:150})}),Object(O.jsx)("h2",{className:"text-center text-2xl lg:text-5xl",children:"Join Avion School on Slack"}),Object(O.jsx)("p",{className:"text-center text-xl lg:text-xl my-5",children:"Start by entering the email address you use for work."}),Object(O.jsx)("div",{className:"w-96 lg:w-2/5 my-5 px-5",children:Object(O.jsx)(g,{children:Object(O.jsxs)("div",{className:"flex flex-col gap-4 p-2",children:[Object(O.jsx)(N,{label:"Email",value:null===s?"":s,onChange:function(e){te(e,"email")},id:"email",type:"text",placeholder:"Enter your email"}),T&&Object(O.jsx)("span",{className:"text-red-400",children:T}),Object(O.jsx)(N,{label:"Password",value:null===d?"":d,onChange:function(e){te(e,"password")},id:"password",type:"password",placeholder:"Enter a password"}),D&&Object(O.jsx)("span",{className:"text-red-400",children:D}),Object(O.jsx)(N,{label:"Confirm Password",value:null===f?"":f,onChange:function(e){te(e,"confirmPassword")},id:"confirm_pw",type:"password",placeholder:"Confirm your password"}),I&&Object(O.jsx)("span",{className:"text-red-400",children:I}),Object(O.jsx)(w,{onClick:function(){return ee(X)},children:"Sign Up"}),Object(O.jsxs)("span",{children:["Already have an account? ",Object(O.jsx)(r.b,{to:"/signin",className:"text-blue-800 underline font-semibold",children:" Sign in instead"})]})]})})}),Object(O.jsx)(C.a,{show:q,enter:"transition-opacity duration-75",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition-opacity duration-150",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:Object(O.jsx)(S,{type:Q.toastType,onClick:function(){se(!1)},children:Q.toastMsg})})]})},F=s(27),D=Object(a.createContext)(),_=function(e){var t=e.children,s=Object(a.useState)(null),n=Object(o.a)(s,2),c=n[0],i=n[1],r=Object(a.useState)(null),l=Object(o.a)(r,2),d=l[0],u=l[1],j=Object(a.useState)(null),b=Object(o.a)(j,2),m=b[0],x=b[1],h=Object(a.useState)({creator:"",members:""}),f=Object(o.a)(h,2),v=f[0],p=f[1];Object(a.useEffect)((function(){if(m){var e=m.channel_members.map((function(e){return e.user_id}));p((function(t){return Object(F.a)(Object(F.a)({},t),{},{members:c.filter((function(t){return e.includes(t.id)}))})})),p((function(e){return Object(F.a)(Object(F.a)({},e),{},{creator:c.filter((function(e){return e.id===m.owner_id}))})}))}}),[m]);var g=Object(a.useState)(""),y=Object(o.a)(g,2),N=y[0],w=y[1],C=Object(a.useState)({id:"",type:""}),k=Object(o.a)(C,2),S=k[0],L=k[1],T=Object(a.useState)([]),M=Object(o.a)(T,2),E=M[0],_=M[1],U=Object(a.useState)(!0),P=Object(o.a)(U,2),I=P[0],A=P[1];Object(a.useEffect)((function(){var e=setTimeout((function(){A(!1)}),1e3);return function(){clearTimeout(e)}}),[E]);var R={userList:c,updateUserList:function(e){i(e)},channelList:d,updateChannelList:function(e){u(e)},channelData:m,updateChannelData:function(e){x(e)},msgRecipient:N,updateMsgRecipient:function(e){w(e)},recipientMetadata:S,updateRecipientMetadata:function(e,t){L({id:e,type:t})},msgList:E,updateMsgList:function(e){_(e)},moreChannelData:v,isMsgListLoading:I,setIsMsgListLoading:A};return Object(O.jsx)(D.Provider,{value:R,children:t})},U=s(83),P=s(49),I=function(e){var t=e.label,s=e.id,a=e.type,n=e.placeholder,c=e.onChange,i=e.value,r=e.labelClass,l=e.inputClass;return Object(O.jsxs)("div",{className:"flex flex-col",children:[Object(O.jsx)("label",{htmlFor:s,className:r,children:t}),Object(O.jsx)("input",{onChange:c,value:i,className:l,id:s,name:s,type:a,placeholder:n})]})},A=s(84),R=s(48),B=s.n(R),Z=s(21),V=function(e){var t=e.setOpenModal,s=e.openModal,n=e.toggleToast,c=e.updateToastStat,i=Object(a.useContext)(L).activeUser,r=Object(a.useContext)(D),l=r.userList,d=r.updateChannelList,j=Object(a.useState)(null),b=Object(o.a)(j,2),x=b[0],h=b[1],f=Object(a.useState)(""),g=Object(o.a)(f,2),y=g[0],N=g[1],w=Object(a.useState)([]),S=Object(o.a)(w,2),T=S[0],M=S[1];Object(a.useEffect)((function(){if(""!==y){var e=new RegExp("".concat(y),"i");M(null===l||void 0===l?void 0:l.filter((function(t){return e.test(t.uid)})))}else M(l)}),[y]);var E=Object(a.useState)([]),F=Object(o.a)(E,2),_=F[0],U=F[1],R=function(e){_.includes(e.target.value)?U(_.filter((function(t){return t!==e.target.value}))):U((function(t){return[].concat(Object(P.a)(t),[e.target.value])}))},V=Object(a.useState)(0),z=Object(o.a)(V,2),J=z[0],G=z[1],q=10*J,K=Math.ceil((null===T||void 0===T?void 0:T.length)/10);return Object(O.jsx)("div",{children:Object(O.jsx)(C.a,{appear:!0,show:s,as:a.Fragment,children:Object(O.jsx)(A.a,{as:"div",className:"fixed inset-0 z-10 overflow-y-auto",onClose:function(){return t(!1)},children:Object(O.jsxs)("div",{className:"min-h-screen px-4 text-center ",children:[Object(O.jsx)(C.a.Child,{as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:Object(O.jsx)(A.a.Overlay,{className:"fixed inset-0"})}),Object(O.jsx)("span",{className:"inline-block h-screen align-middle","aria-hidden":"true"}),Object(O.jsx)(C.a.Child,{as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:Object(O.jsxs)("div",{className:"inline-block modal-width bg-gray-800 p-4 my-8 overflow-hidden text-left align-middle transition-all transform shadow-md rounded-lg border border-black min-w-200",children:[Object(O.jsxs)("div",{className:"flex justify-between items-center",children:[Object(O.jsx)("h3",{className:"text-gray-100 text-lg mb-1",children:"Create a Channel"}),Object(O.jsx)(k.h,{className:"h-5 w-5 cursor-pointer text-gray-100",onClick:function(){return t(!1)}})]}),Object(O.jsx)("p",{className:"text-gray-400 text-xs mb-6",children:"Make a channel name no longer than 15 characters and select users to add to your channel."}),Object(O.jsxs)("div",{className:"mt-2",children:[Object(O.jsx)(I,{onChange:function(e){h(e.target.value)},id:"channelName",type:"text",placeholder:"Type a channel name",labelClass:"text-gray-200",inputClass:"mt-2 py-1 px-2 rounded bg-gray-900 text-sm text-gray-300 border-transparent focus:ring-0 focus:outline-none focus:border-transparent"}),Object(O.jsx)(I,{onChange:function(e){N(e.target.value)},type:"text",placeholder:"Type the email of a friend",labelClass:"text-gray-200 mt-2",inputClass:"mt-2 py-1 px-2 rounded bg-gray-900 text-sm text-gray-300 border-transparent focus:ring-0 focus:outline-none focus:border-transparent"})]}),Object(O.jsxs)("div",{className:"mt-6",children:[Object(O.jsx)("ul",{className:"h-40 overflow-y-scroll modal-scrollbar",children:null===T||void 0===T?void 0:T.slice(q,q+10).map((function(e){return Object(O.jsxs)("li",{className:"flex py-1 px-2 items-center hover:bg-gray-600 cursor-pointer",children:[Object(O.jsx)("div",{className:"flex justify-center items-center h-6 w-6 mr-2 flex-shrink-0",children:Object(O.jsx)("span",{className:p(null===e||void 0===e?void 0:e.id),children:Object(O.jsx)("img",{src:v(null===e||void 0===e?void 0:e.id,"User"),className:"h-6 w-6 items-center"})})}),Object(O.jsxs)("label",{htmlFor:e.uid,className:"text-gray-300 text-sm cursor-pointer",onClick:R,children:[e.uid,Object(O.jsxs)("span",{className:"pl-2 text-gray-400",children:["(UID: ",e.id,")"]})]}),Object(O.jsx)("input",{onClick:R,className:"ml-auto border border-gray-300 bg-transparent rounded focus:ring-0 focus:ring-offset-0 focus:outline-none active:ring-0 checked:bg-green-300 text-green-300 w-5 h-5 cursor-pointer",id:e.uid,type:"checkbox",defaultChecked:_.includes(String(e.id)),value:e.id})]},e.uid)}))}),Object(O.jsx)("div",{id:"react-paginate",className:"pt-6 pb-2",children:Object(O.jsx)(B.a,{previousLabel:Object(O.jsx)(Z.a,{className:"h-5 w-5"}),nextLabel:Object(O.jsx)(Z.b,{className:"h-5 w-5"}),pageCount:K,breakLabel:"...",breakClassName:"m-0 py-1 px-3 text-gray-300 flex items-center",onPageChange:function(e){var t=e.selected;G(t)},containerClassName:"items-center justify-center flex",pageClassName:"m-0 py-1 px-3 mx-2 text-gray-300",previousLinkClassName:"text-gray-300 mr-2 flex items-center",nextLinkClassName:"text-gray-300 ml-2 flex items-center",disabledClassName:"pagination__link--disabled",activeClassName:"bg-gray-600 border border-gray-500 text-gray-300 rounded",pageRangeDisplayed:3,marginPagesDisplayed:0})})]}),Object(O.jsx)("div",{className:"mt-4",children:Object(O.jsx)("button",{type:"button",className:"w-full px-4 py-2 text-sm font-large text-green-900 bg-green-200 border border-transparent rounded-md hover:bg-green-300 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500",onClick:function(){!function(e,t,s,a,n,c,i){var r={name:e,user_ids:t},l={method:"POST",url:"https://slackapi.avionschool.com/api/v1/channels",headers:{"access-token":s["access-token"],client:s.client,expiry:s.expiry,uid:s.uid},data:r};u()(l).then((function(e){e.data.data?(n(!0),c("success","Success! Channel has been created."),m(s,a),i(!1)):e.data.errors&&(n(!0),c("error",e.data.errors[0]))})).catch((function(e){if(e.response){var t=e.response.data.errors;n(!0),c("error",t)}}))}(x,_,i,d,n,c,t)},children:"Create New Channel"})})]})})]})})})})},z=function(e){var t=e.updateMsgStat,s=e.toggleIsSideBarVisible,n=Object(a.useContext)(L).activeUser,c=Object(a.useContext)(D),i=c.userList,r=c.channelList,l=c.updateChannelData,d=c.updateRecipientMetadata,u=c.updateMsgRecipient,j=(c.updateMsgList,c.setIsMsgListLoading);Object(a.useEffect)((function(){T(null===i||void 0===i?void 0:i.slice(-10))}),[i]);var b=Object(a.useState)(!1),m=Object(o.a)(b,2),h=m[0],f=m[1],g=function(){f(!h),s()},y=Object(a.useState)(null),N=Object(o.a)(y,2),w=N[0],T=N[1],M=Object(a.useState)(!1),E=Object(o.a)(M,2),F=E[0],_=E[1],P=Object(a.useState)({toastType:"",toastMsg:""}),I=Object(o.a)(P,2),A=I[0],R=I[1],B=function(e){_(e)};Object(a.useEffect)((function(){var e=setTimeout((function(){_(!1)}),2e3);return function(){return clearTimeout(e)}}),[F]);var Z=function(e,a,c){j(!0),t(!1),d(e,a),u(c),s(),"Channel"===a&&x(n,e,l)};return Object(O.jsxs)("div",{className:"row-start-2 overflow-hidden",children:[Object(O.jsxs)("div",{className:"h-full border-r border-gray-600 flex flex-col items-start text-gray-300 bg-gray-900 no-scrollbar overflow-y-auto",children:[Object(O.jsx)(U.a,{children:function(e){var t=e.open;return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)(U.a.Button,{className:"pt-6 pb-2 px-4 flex items-center",children:[Object(O.jsx)(k.c,{className:"".concat(t?"transform rotate-90":""," w-5 h-5 text-gray-300 mr-2")}),Object(O.jsx)("span",{children:"Channels"})]}),Object(O.jsx)(C.a,{show:t,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0",className:"w-full pb-6",children:Object(O.jsxs)(U.a.Panel,{className:"text-gray-500",static:!0,as:"ul",children:[null===r||void 0===r?void 0:r.map((function(e){return Object(O.jsxs)("li",{className:"flex py-1 px-6 items-center hover:bg-gray-700 cursor-pointer",onClick:function(){return Z(null===e||void 0===e?void 0:e.id,"Channel",null===e||void 0===e?void 0:e.name)},children:[Object(O.jsx)("div",{className:"flex justify-center items-center h-5 w-5 mr-2 flex-shrink-0",children:Object(O.jsx)("span",{className:p(null===e||void 0===e?void 0:e.id),children:Object(O.jsx)("img",{src:v(null===e||void 0===e?void 0:e.id,"Channel"),className:"h-5 w-5 items-center"})})}),Object(O.jsx)("div",{className:"text-gray-300 truncate text-sm",children:null===e||void 0===e?void 0:e.name})]},e.id)})),Object(O.jsxs)("div",{className:"flex py-1 px-6 items-center hover:bg-gray-700 cursor-pointer text-gray-300",onClick:g,children:[Object(O.jsx)("div",{className:"flex items-center justify-center bg-gray-600 h-5 w-5 mr-2 flex-shrink-0 rounded",children:Object(O.jsx)(k.g,{className:"h-5 w-5"})}),Object(O.jsx)("span",{children:"Add channel"})]})]})})]})}}),h&&Object(O.jsx)(V,{openModal:h,setOpenModal:f,toggleToast:B,updateToastStat:function(e,t){R({toastType:e,toastMsg:t})}}),Object(O.jsx)(U.a,{children:function(e){var t=e.open;return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)(U.a.Button,{className:"py-2 px-4 flex items-center",children:[Object(O.jsx)(k.c,{className:"".concat(t?"transform rotate-90":""," w-5 h-5 text-gray-300 mr-2")}),Object(O.jsx)("span",{children:"Direct Messages"})]}),Object(O.jsx)(C.a,{show:t,enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0",className:"w-full",children:Object(O.jsx)(U.a.Panel,{className:"text-gray-500 w-full",static:!0,as:"ul",children:!!(null===w||void 0===w?void 0:w.length)&&w.map((function(e){return Object(O.jsxs)("li",{className:"flex py-1 px-6 items-center hover:bg-gray-700 cursor-pointer",onClick:function(){return Z(null===e||void 0===e?void 0:e.id,"User",e.uid)},children:[Object(O.jsx)("div",{className:"flex justify-center items-center h-5 w-5 mr-2 flex-shrink-0",children:Object(O.jsx)("span",{className:p(null===e||void 0===e?void 0:e.id),children:Object(O.jsx)("img",{src:v(null===e||void 0===e?void 0:e.id,"User"),className:"h-5 w-5 items-center"})})}),Object(O.jsx)("div",{className:"text-gray-300 truncate text-sm",children:null===e||void 0===e?void 0:e.uid})]},e.id)}))})})]})}})]}),Object(O.jsx)(C.a,{show:F,enter:"transition-opacity duration-75",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition-opacity duration-150",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:Object(O.jsx)(S,{type:A.toastType,onClick:function(){B(!1)},children:A.toastMsg})})]})},J=s(86),G=function(e){var t=e.msgStat,s=e.onClick,n=Object(l.g)(),c=Object(a.useContext)(L),i=c.setAuth,r=c.setUser,o=Object(a.useContext)(D),d=o.updateMsgList,u=o.updateMsgRecipient,j=o.updateRecipientMetadata;return Object(a.useEffect)((function(){!0===t&&(d([]),u(""),j("",""))}),[t]),Object(O.jsxs)("div",{className:"col-start-1 col-end-2 row-start-1 px-4 py-2 flex items-center justify-between bg-gray-900 border-b border-r border-gray-600",children:[Object(O.jsxs)(J.a,{as:"div",className:"relative",children:[Object(O.jsxs)(J.a.Button,{className:"text-white inline-flex justify-center items-center",children:[Object(O.jsx)("h2",{children:"Avion School"}),Object(O.jsx)(k.b,{className:"w-5 h-5 ml-2 -mr-1 text-white"})]}),Object(O.jsx)(C.a,{as:a.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:Object(O.jsx)(J.a.Items,{className:"absolute left-0 w-40 mt-2 py-2 px-4 origin-top-left bg-gray-700 rounded-md ring-1 ring-black ring-opacity-5 focus:outline-none",as:"ul",children:Object(O.jsxs)(J.a.Item,{as:"li",className:"flex gap-2",children:[Object(O.jsx)("span",{className:"flex items-center justify-center text-red-300",children:Object(O.jsx)(Z.c,{className:"h-5 w-5"})}),Object(O.jsx)("button",{className:"text-red-300",onClick:function(){return function(e,t,s){e(!1),t(null),s.push("/signin")}(i,r,n),d([]),u(""),void j("","")},children:"Sign Out"})]})})})]}),Object(O.jsx)("span",{className:"rounded-full bg-white p-2 flex justify-center items-center",onClick:function(){return s(!0)},children:Object(O.jsx)(Z.d,{className:"h-4 w-4"})})]})},q=function(e){var t=e.setOpenModal,s=e.openModal,n=e.toggleToast,c=e.updateToastStat,i=Object(a.useContext)(L).activeUser,r=Object(a.useContext)(D),l=r.channelData,d=r.moreChannelData,j=r.updateChannelData,b=r.userList,m=Object(a.useState)(""),x=Object(o.a)(m,2),h=x[0],g=x[1],y=Object(a.useState)([]),N=Object(o.a)(y,2),w=N[0],S=N[1];Object(a.useEffect)((function(){if(""!==h){var e=new RegExp("".concat(h),"i");S(null===b||void 0===b?void 0:b.filter((function(t){return e.test(t.uid)})).slice(0,10))}else S([]),F(!1)}),[h]);var T=f(!1),M=T.ref,E=T.isComponentVisible,F=T.setIsComponentVisible,_=function(e){d.members.filter((function(t){return(null===t||void 0===t?void 0:t.id)===e})).length?(n(!0),c("error","User is already in channel.")):(!function(e,t,s,a,n,c,i){var r={id:t,member_id:s},l={method:"POST",url:"https://slackapi.avionschool.com/api/v1/channel/add_member",headers:{"access-token":e["access-token"],client:e.client,expiry:e.expiry,uid:e.uid},data:r};u()(l).then((function(e){e.data&&(a(e.data.data),i(""),n(!0),c("success","Success! User was added to channel."))})).catch((function(e){if(e.response){var t=e.response.data.errors;n(!0),c("error",t),console.log(e)}}))}(i,l.id,e,j,n,c,g),F(!1))};return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(C.a,{appear:!0,show:s,as:a.Fragment,children:Object(O.jsx)(A.a,{as:"div",className:"fixed inset-0 z-10 overflow-y-auto",onClose:function(){return t(!1)},children:Object(O.jsxs)("div",{className:"min-h-screen px-4 text-center ",children:[Object(O.jsx)(C.a.Child,{as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:Object(O.jsx)(A.a.Overlay,{className:"fixed inset-0"})}),Object(O.jsx)("span",{className:"inline-block h-screen align-middle","aria-hidden":"true"}),Object(O.jsx)(C.a.Child,{as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:Object(O.jsxs)("div",{className:"inline-block modal-width bg-gray-800 p-4 my-8 text-left align-middle transition-all sm:transform shadow-2xl rounded-lg border border-black min-w-200",children:[Object(O.jsxs)("div",{className:"flex text-gray-100 text-lg justify-between items-center mb-6",children:[Object(O.jsx)("h3",{children:"Channel Information"}),Object(O.jsx)(k.h,{className:"h-5 w-5 cursor-pointer",onClick:function(){return t(!1)}})]}),Object(O.jsxs)("div",{className:"mb-4 text-gray-300 relative",children:[Object(O.jsx)(I,{onChange:function(e){g(e.target.value),F(""!==e.target.value)},id:"inviteUser",type:"text",placeholder:"Invite a friend",value:h,inputClass:"mt-2 py-1 px-2 rounded bg-gray-900 text-sm text-gray-300 border-transparent focus:ring-0 focus:outline-none focus:border-transparent"}),Object(O.jsx)("div",{ref:M,className:"absolute z-10 w-full",children:E&&Object(O.jsx)("div",{className:"text-gray-200 max-h-96 w-full overflow-y-auto border-gray-600 border rounded-lg bg-gray-700 py-2 modified-scrollbar",children:Object(O.jsx)("ul",{children:null===w||void 0===w?void 0:w.map((function(e){return Object(O.jsxs)("li",{className:"px-6 py-1 flex gap-2 text-white hover:bg-white hover:text-gray-700 cursor-pointer",onClick:function(){return _(e.id)},children:[Object(O.jsx)("div",{className:"flex justify-center items-center h-5 w-5",children:Object(O.jsx)("span",{className:p(null===e||void 0===e?void 0:e.id),children:Object(O.jsx)("img",{src:v(null===e||void 0===e?void 0:e.id,"User"),className:"h-5 w-5 items-center"})})}),Object(O.jsx)("div",{className:"text-sm",children:null===e||void 0===e?void 0:e.uid})]},e.id)}))})})})]}),Object(O.jsxs)("div",{className:"flex flex-col items-start text-gray-300 overflow-y-auto modified-scrollbar max-h-56",children:[Object(O.jsx)("span",{className:"pb-4",children:"Channel Members:"}),Object(O.jsx)("ul",{className:"w-full",children:d.members&&d.members.map((function(e){return Object(O.jsxs)("li",{className:"flex py-1 px-2 items-center",children:[Object(O.jsx)("div",{className:" flex justify-center items-center h-5 w-5 mr-2 flex-shrink-0",children:Object(O.jsx)("span",{className:p(null===e||void 0===e?void 0:e.id),children:Object(O.jsx)("img",{src:v(null===e||void 0===e?void 0:e.id,"User"),className:"h-5 w-5 items-center"})})}),Object(O.jsx)("div",{className:"text-gray-300 text-sm truncate",children:null===e||void 0===e?void 0:e.uid})]},e.id)}))})]})]})})]})})})})},K=function(){var e=Object(a.useContext)(D),t=e.msgRecipient,s=e.recipientMetadata,n=e.moreChannelData,c=Object(a.useState)(!1),i=Object(o.a)(c,2),r=i[0],l=i[1],d=Object(a.useState)(!1),u=Object(o.a)(d,2),j=u[0],b=u[1],m=Object(a.useState)({toastType:"",toastMsg:""}),x=Object(o.a)(m,2),h=x[0],f=x[1],g=function(e){b(e)};return Object(a.useEffect)((function(){var e=setTimeout((function(){b(!1)}),2e3);return function(){return clearTimeout(e)}}),[j]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{className:"flex justify-between border-b border-gray-600",children:[Object(O.jsxs)("div",{className:"flex items-center py-2 px-4",children:[!(""===(null===s||void 0===s?void 0:s.id))&&Object(O.jsx)("div",{className:"flex justify-center items-center h-8 w-8 mr-2",children:Object(O.jsx)("span",{className:p(null===s||void 0===s?void 0:s.id),children:Object(O.jsx)("img",{src:v(null===s||void 0===s?void 0:s.id,null===s||void 0===s?void 0:s.type),className:"h-8 w-8 items-center"})})}),Object(O.jsx)("h3",{className:"text-white",children:""===s.id?"New message":t})]}),Object(O.jsx)("div",{className:"text-gray-300 py-1 flex items-center mr-2 cursor-pointer",onClick:function(){l(!r)},children:Object(O.jsx)("div",{className:"flex items-center p-1",children:Object(O.jsxs)("div",{className:"flex align-center -space-x-2 overflow-hidden",children:[!("Channel"!==(null===s||void 0===s?void 0:s.type)||!n.members)&&n.members.slice(0,3).map((function(e){return Object(O.jsx)("div",{className:"inline-block rounded-full ring-4 ring-gray-800",children:Object(O.jsx)("div",{className:"flex justify-center items-center h-7 w-7",children:Object(O.jsx)("span",{className:p(null===e||void 0===e?void 0:e.id)+" rounded-full",children:Object(O.jsx)("img",{src:v(null===e||void 0===e?void 0:e.id,"User"),className:"h-7 w-7 items-center"})})})},e.id)})),!!("Channel"===(null===s||void 0===s?void 0:s.type)&&(null===n||void 0===n?void 0:n.members.length)>3)&&Object(O.jsx)("div",{className:"h-7 w-7 flex items-center justify-center text-xs rounded-full bg-gray-600 ring-4 ring-gray-800 text-gray-200",children:n.members.length})]})})})]}),Object(O.jsx)(q,{openModal:r,setOpenModal:l,toggleToast:g,updateToastStat:function(e,t){f({toastType:e,toastMsg:t})}}),Object(O.jsx)(C.a,{show:j,enter:"transition-opacity duration-75",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"transition-opacity duration-150",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:Object(O.jsx)(S,{type:h.toastType,onClick:function(){g(!1)},children:h.toastMsg})})]})},$=function(e){var t=e.onClick,s=e.recipientList,a=e.resultChannelList;return Object(O.jsxs)("div",{className:"text-gray-200 max-h-96 overflow-y-auto ml-6 mr-2 border-gray-600 border rounded-lg bg-gray-700 py-2 modified-scrollbar",children:[!!(null===a||void 0===a?void 0:a.length)&&a.map((function(e){return Object(O.jsx)("div",{onClick:function(){return t({identifier:null===e||void 0===e?void 0:e.name,id:null===e||void 0===e?void 0:e.id,type:"Channel"})},children:Object(O.jsxs)("div",{className:"px-6 py-1 flex gap-2 text-white hover:bg-white hover:text-gray-700 cursor-pointer",children:[Object(O.jsx)("span",{className:"flex justify-center items-center",children:Object(O.jsx)("span",{className:p(null===e||void 0===e?void 0:e.id),children:Object(O.jsx)("img",{src:v(null===e||void 0===e?void 0:e.id,"Channel"),className:"h-5 w-5 items-center rounded"})})}),Object(O.jsxs)("span",{children:["#",e.name]})]})},e.id)})),!!(null===s||void 0===s?void 0:s.length)&&s.map((function(e){return Object(O.jsx)("div",{onClick:function(){return t({identifier:null===e||void 0===e?void 0:e.email,id:null===e||void 0===e?void 0:e.id,type:"User"})},children:Object(O.jsxs)("div",{className:"px-6 py-1 flex gap-2 text-white hover:bg-white hover:text-gray-700 cursor-pointer",children:[Object(O.jsx)("span",{className:"flex justify-center items-center",children:Object(O.jsx)("span",{className:p(null===e||void 0===e?void 0:e.id),children:Object(O.jsx)("img",{src:v(null===e||void 0===e?void 0:e.id,"User"),className:"h-5 w-5 items-center"})})}),Object(O.jsx)("span",{children:e.email}),Object(O.jsxs)("span",{children:["(UID: ",e.id,")"]})]})},e.id)})),!(null===a||void 0===a?void 0:a.length)&&!(null===s||void 0===s?void 0:s.length)&&Object(O.jsx)("div",{className:"py-2 px-6",children:"No items"})]})},H=function(){return Object(O.jsx)("div",{className:"p-4 max-w-2xl w-full",children:Object(O.jsxs)("div",{className:"animate-pulse flex flex-col space-y-4",children:[Object(O.jsxs)("div",{className:"flex space-x-4 items-center",children:[Object(O.jsx)("div",{className:"rounded bg-gray-400 h-8 w-8"}),Object(O.jsxs)("div",{className:"flex-1 items-center py-1",children:[Object(O.jsx)("div",{className:"h-4 bg-gray-400 rounded w-3/4"}),Object(O.jsx)("div",{className:"space-y-2"})]})]}),Object(O.jsx)("div",{className:"h-2 bg-gray-400 rounded"})]})})},Q=function(e){var t,s=e.msgStat,n=e.updateMsgStat,c=Object(a.useContext)(D),i=c.userList,r=c.channelList,l=c.channelData,d=c.updateChannelData,j=c.msgRecipient,b=c.updateMsgRecipient,m=c.recipientMetadata,g=c.updateRecipientMetadata,y=c.msgList,N=c.updateMsgList,w=c.moreChannelData,C=c.isMsgListLoading,S=c.setIsMsgListLoading,T=Object(a.useContext)(L).activeUser,M=Object(a.useRef)(),E=Object(a.useState)(null),F=Object(o.a)(E,2),_=F[0],U=F[1],P=Object(a.useState)(null),I=Object(o.a)(P,2),A=I[0],R=I[1],B=f(!1),Z=B.ref,V=B.isComponentVisible,z=B.setIsComponentVisible;Object(a.useEffect)((function(){if(""!==j){var e=new RegExp("".concat(j),"i");U(null===i||void 0===i?void 0:i.filter((function(t){return e.test(t.email)||e.test(t.id)})).slice(0,10)),R(null===r||void 0===r?void 0:r.filter((function(t){return e.test(t.name)})))}else U([]),R([]),z(!1),g("","")}),[j]),Object(a.useEffect)((function(){T&&h(T,null===m||void 0===m?void 0:m.id,null===m||void 0===m?void 0:m.type).then((function(e){return N(e)})).catch((function(e){return console.error(e)}))}),[m]),Object(a.useEffect)((function(){!0===s&&(b(""),g("",""))}),[s]);var J=function(e,t){""!==j&&("click"===t||"keypress"===t&&"Enter"===e.key&&!e.shiftKey)&&(e.preventDefault(),function(e,t,s,a){var n={receiver_id:t,receiver_class:a,body:s},c={method:"POST",url:"https://slackapi.avionschool.com/api/v1/messages",headers:{"access-token":e["access-token"],client:e.client,expiry:e.expiry,uid:e.uid},data:n};return u()(c).then((function(s){if(s.data)return h(e,t,a)})).catch((function(e){console.log(e)}))}(T,m.id,M.current.value,m.type).then((function(e){N(e),M.current.value="",n(!1)})).catch((function(e){return console.error(e)})))};return Object(O.jsxs)("div",{className:"col-start-2 col-end-4 row-start-2 flex flex-col overflow-hidden flex-grow",children:[s&&Object(O.jsxs)("div",{className:"flex text-gray-300 items-center p-4 border-b border-gray-600 relative",children:[Object(O.jsx)("p",{className:"pr-4",children:"To:"}),!(""===m.id)&&Object(O.jsx)("span",{className:"flex justify-center items-center mr-1",children:Object(O.jsx)("span",{className:p(null===m||void 0===m?void 0:m.id),children:Object(O.jsx)("img",{src:v(null===m||void 0===m?void 0:m.id,null===m||void 0===m?void 0:m.type),className:"h-5 w-5 items-center"})})}),Object(O.jsx)("input",{type:"text",className:"bg-transparent w-full border-0 focus:ring-0 focus:outline-none",placeholder:"#a-channel, @uid, or somebody@example.com",value:j,onChange:function(e){b(e.target.value),z(""!==e.target.value)}}),Object(O.jsx)("div",{ref:Z,className:"recipient-results absolute z-10",children:V&&Object(O.jsx)($,{onClick:function(e){var t=e.identifier,s=e.id,a=e.type;S(!0),b(t),g(s,a),z(!1),"Channel"===a&&x(T,s,d)},resultChannelList:A,recipientList:_})})]}),Object(O.jsx)("div",{className:"overflow-auto flex flex-col-reverse modified-scrollbar h-full",children:Object(O.jsx)("div",{className:"py-4 flex-grow text-gray-200 flex flex-col",children:Object(O.jsxs)("div",{className:"mt-auto",children:[""===m.id||C?!!C&&Object(O.jsx)(H,{}):Object(O.jsxs)("div",{className:"flex flex-col p-4 mb-6 gap-2",children:[Object(O.jsxs)("div",{className:"flex gap-2 items-center",children:[Object(O.jsx)("span",{className:"flex justify-center items-center mr-1",children:Object(O.jsx)("span",{className:p(null===m||void 0===m?void 0:m.id),children:Object(O.jsx)("img",{src:v(null===m||void 0===m?void 0:m.id,null===m||void 0===m?void 0:m.type),className:"h-8 w-8 items-center"})})}),Object(O.jsx)("div",{className:"Channel"===(null===m||void 0===m?void 0:m.type)?"font-bold text-lg":"",children:j})]}),Object(O.jsx)("p",{children:"User"===(null===m||void 0===m?void 0:m.type)?"This is the very beginning of your direct message history with @".concat(j,". Only the two of you are in this conversation, and no one else can join it."):"User ".concat(null===w||void 0===w||null===(t=w.creator[0])||void 0===t?void 0:t.uid," created this private channel on ").concat(new Date(null===l||void 0===l?void 0:l.created_at).toLocaleDateString([],{month:"long",day:"numeric"}),". This is the very beginning of the #").concat(j," channel.")})]}),!(!(null===y||void 0===y?void 0:y.length)||C)&&y.map((function(e,t,s){var a,n,c,i,r,l,o;return Object(O.jsxs)("div",{children:[!!(t>0&&new Date(null===(a=s[t])||void 0===a?void 0:a.created_at).getDate()!==new Date(null===(n=s[t-1])||void 0===n?void 0:n.created_at).getDate()||0===t)&&Object(O.jsxs)("div",{className:"relative flex items-center justify-center my-5",children:[Object(O.jsx)("span",{className:"absolute rounded-full bg-gray-800 px-4 py-2 border border-gray-600 text-xs",children:new Date(null===(c=s[t])||void 0===c?void 0:c.created_at).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),Object(O.jsx)("div",{className:"h-px bg-gray-600 w-full"})]}),Object(O.jsxs)("div",{className:"flex items-center gap-2 py-1 px-4 group hover:bg-gray-700",children:[t>0&&s[t].sender.email!==s[t-1].sender.email||0===t||new Date(null===(i=s[t])||void 0===i?void 0:i.created_at).getDate()!==new Date(null===(r=s[t-1])||void 0===r?void 0:r.created_at).getDate()?Object(O.jsx)("div",{className:"flex justify-center items-center h-8 w-8",children:Object(O.jsx)("span",{className:p(null===e||void 0===e?void 0:e.sender.id),children:Object(O.jsx)("img",{src:v(null===e||void 0===e?void 0:e.sender.id,"User"),className:"h-8 w-8 items-center"})})}):Object(O.jsx)("div",{className:"w-8 rounded",children:Object(O.jsx)("p",{className:"text-xs opacity-0 group-hover:opacity-100",children:new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0}).replace("AM","").replace("PM","")})}),Object(O.jsxs)("div",{className:"flex flex-col",children:[!!(t>0&&s[t].sender.email!==s[t-1].sender.email||0===t||new Date(null===(l=s[t])||void 0===l?void 0:l.created_at).getDate()!==new Date(null===(o=s[t-1])||void 0===o?void 0:o.created_at).getDate())&&Object(O.jsxs)("div",{className:"flex items-center",children:[Object(O.jsx)("p",{className:"text-sm font-bold",children:e.sender.email}),Object(O.jsx)("p",{className:"text-xs pl-2",children:new Date(e.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0})})]}),Object(O.jsx)("p",{className:"text-sm",children:e.body})]})]})]},e.id)}))]})})}),Object(O.jsxs)("div",{className:"mt-auto flex gap-2 p-4",children:[Object(O.jsx)("textarea",{className:"custom-textarea",ref:M,placeholder:"Enter a message",onKeyPress:function(e){return J(e,"keypress")}}),Object(O.jsx)("div",{className:""===(null===m||void 0===m?void 0:m.id)?"bg-green-900 flex items-center justify-center px-4 rounded":"bg-green-300 hover:bg-green-500 cursor-pointer flex items-center justify-center px-4 rounded",onClick:function(e){return J(e,"click")},children:Object(O.jsx)(k.f,{className:"h-6 w-6 transform rotate-45 -mt-1 pb-1 text-white"})})]})]})},W=function(e){var t,s,n=e.toggleIsSideBarVisible,c=Object(a.useContext)(L).activeUser,i=Object(a.useContext)(D).userList,r=Object(a.useState)([]),l=Object(o.a)(r,2),d=l[0],u=l[1];return Object(a.useEffect)((function(){c&&u(null===i||void 0===i?void 0:i.filter((function(e){return e.uid===c.uid})))}),[c,i]),Object(O.jsxs)("div",{className:"flex items-center justify-between py-1 px-4 border-b border-gray-600 bg-black sm:hidden",children:[Object(O.jsx)("span",{className:"text-gray-100 flex items-center",children:Object(O.jsx)(k.e,{onClick:n,className:"h-5 w-5"})}),!(!d||!d.length)&&Object(O.jsxs)("div",{className:"text-gray-300 flex py-1 items-center relative",children:[Object(O.jsx)("div",{className:"flex justify-center items-center h-6 w-6 flex-shrink-0",children:Object(O.jsx)("span",{className:p(null===(t=d[0])||void 0===t?void 0:t.id),children:Object(O.jsx)("img",{src:v(null===(s=d[0])||void 0===s?void 0:s.id,"User"),className:"h-6 w-6 items-center"})})}),Object(O.jsx)("span",{className:"bg-green-500 rounded-full h-2 w-2 absolute bottom-0 right-0 -mr-1"})]})]})},X=function(){var e=Object(a.useContext)(L),t=e.isAuthenticated,s=(e.setAuth,e.activeUser),n=(e.setUser,Object(a.useContext)(D)),c=n.updateUserList,i=n.updateChannelList,r=Object(a.useState)(!1),d=Object(o.a)(r,2),j=d[0],b=d[1],x=function(e){b(e)};Object(a.useEffect)((function(){s&&(!function(e,t){var s={method:"GET",url:"https://slackapi.avionschool.com/api/v1/users",headers:{"access-token":e["access-token"],client:e.client,expiry:e.expiry,uid:e.uid}};u()(s).then((function(e){e.data&&t(e.data.data)})).catch((function(e){console.log(e)}))}(s,c),m(s,i))}),[s]);var h=Object(a.useState)(!0),f=Object(o.a)(h,2),v=f[0],p=f[1],g=function(){p(!v)},y="absolute sm:static w-full h-full sm:col-start-1 sm:row-start-1 sm:row-end-3 z-20 sm:z-0 grid sidebar-grid";return v||(y="hidden absolute w-full h-full sm:grid sm:static sm:col-start-1 sm:row-start-1 sm:row-end-3 z-20 sm:z-0 sidebar-grid"),!1===t||null===s?Object(O.jsx)(l.a,{to:"/signin"}):Object(O.jsxs)("div",{className:"h-full flex flex-col w-screen sm:grid main-grid bg-gray-800",children:[Object(O.jsxs)("div",{className:y,children:[Object(O.jsx)(G,{msgStat:j,onClick:x}),Object(O.jsx)(z,{updateMsgStat:x,toggleIsSideBarVisible:g})]}),Object(O.jsx)(W,{toggleIsSideBarVisible:g}),Object(O.jsx)(K,{}),Object(O.jsx)(Q,{msgStat:j,activeUser:s,updateMsgStat:x})]})};var Y=function(){return Object(O.jsx)(T,{children:Object(O.jsx)(_,{children:Object(O.jsx)(r.a,{children:Object(O.jsxs)(l.d,{children:[Object(O.jsx)(l.b,{path:"/signin",children:Object(O.jsx)(M,{})}),Object(O.jsx)(l.b,{path:"/signup",children:Object(O.jsx)(E,{})}),Object(O.jsx)(l.b,{path:"/",children:Object(O.jsx)(X,{})})]})})})})},ee=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,87)).then((function(t){var s=t.getCLS,a=t.getFID,n=t.getFCP,c=t.getLCP,i=t.getTTFB;s(e),a(e),n(e),c(e),i(e)}))};i.a.render(Object(O.jsx)(n.a.StrictMode,{children:Object(O.jsx)(r.a,{children:Object(O.jsx)(Y,{})})}),document.getElementById("root")),ee()}},[[82,1,2]]]);
//# sourceMappingURL=main.286d86a4.chunk.js.map